{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-8f2bc5000323aca7.js","src/favorite-page.js","src/js/createMarkupFavorite.js","node_modules/@parcel/runtime-js/lib/runtime-d5fb621d8cbffa88.js","src/js/remove-from-favorite.js","src/js/search-favorite.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1Z6Xn\\\":\\\"favorite.3fc94736.js\\\",\\\"k5HmC\\\":\\\"icon.a66ccba6.svg\\\",\\\"2AOeO\\\":\\\"favorite.c735ebbe.js\\\"}\"));","import './js/mob-menu.js';\nimport './js/mob-input.js';\nimport './js/toggle-mode.js';\nimport './js/navigations.js';\nimport './js/createMarkupFavorite.js';\nimport './js/remove-from-favorite.js';\nimport './js/search-favorite.js';\n","import { checkRead, addRead } from './apiCard';\nimport { arrLastData } from './apiNews';\nconst READ_NEWS = 'readNews';\nconst favoriteList = document.querySelector('.gallery');\nconst errorRequest = document.querySelector('.errorRequest');\nexport const iconHeart = new URL('../images/icon.svg', import.meta.url);\nconst STORAGE_KEY_FAVORITE = 'favoriteNews';\nconst favoriteNews = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITE));\n\ncreateMarkupFavorite(favoriteNews);\n\nexport function createMarkupFavorite(arr) {\n  if (!Boolean(favoriteNews)) {\n    errorRequest.classList.remove('visually-hidden');\n    return;\n  }\n\n  let markup = '';\n\n  markup = arr\n    .map(({ id, section, imgUrl, title, abstract, newDateStr, url }) => {\n      return `<li class=\"card js-card-item\" data-target-id=${id}>\n        <div class=\"wrap-image\">\n          <img\n            src=\"${imgUrl}\"\n            alt=\"photo\"\n            class=\"wrap-image__photo\"\n          />\n          <p class=\"wrap-image__text\">${section}</p>\n          <button type=\"button\"  class=\"wrap-image__btn js-is-favorite\">\n            <span class=\"wrap-image__btn-text js-is-favorite\">Remove from favorite</span>\n              <svg class=\"js-is-favorite fill-heard\" width=\"16\" height=\"16\">\n                <use class=\"js-is-favorite\" href ='${iconHeart}#icon-heart'></use>\n              </svg>\n          </button>\n        \n        </div>\n            <h2 class=\"card__title\">${title}</h2>\n            <p class=\"card__description\">${\n              abstract.length > 112 ? abstract.slice(0, 113) + '...' : abstract\n            }</p>\n            <p class=\"wrap-info__time\">${newDateStr}</p>\n            <a href=\"${url}\" class=\"wrap-info__link\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n            <p class=\"wrap-image__active visually-hidden\">Already read</p>\n      </li>`;\n    })\n    .join('');\n  favoriteList.innerHTML = markup;\n  checkRead(READ_NEWS);\n}\n\nfavoriteList.addEventListener('click', e => {\n  arrLastData.length = 0;\n  arrLastData.push(...favoriteNews);\n\n  addRead(e);\n});\n","module.exports = require('./helpers/bundle-url').getBundleURL('1Z6Xn') + require('./helpers/bundle-manifest').resolve(\"k5HmC\");","const STORAGE_KEY_FAVORITE = 'favoriteNews';\nconst favoriteList = document.querySelector('.gallery');\nconst errorRequest = document.querySelector('.errorRequest');\n\nfavoriteList.addEventListener('click', getFavoriteId);\n\nfunction getFavoriteId(evt) {\n  if (evt.target.classList.contains('js-is-favorite')) {\n    const id = evt.target.closest('.js-card-item').dataset.targetId;\n    removeFromFavorite(id);\n  }\n}\n\nfunction removeFromFavorite(id) {\n  const favoriteBtnText = document.querySelector(\n    `li[data-target-id='${id}'] span.js-is-favorite`\n  );\n  const favoriteBtn = document.querySelector(\n    `li[data-target-id='${id}'] button.js-is-favorite`\n  );\n  const favoriteSvg = document.querySelector(\n    `li[data-target-id='${id}'] svg.js-is-favorite`\n  );\n  const favoriteUse = document.querySelector(\n    `li[data-target-id='${id}'] use.js-is-favorite`\n  );\n  const galleryItem = document.querySelector(`li[data-target-id='${id}']`);\n\n  let storageNews = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITE));\n  const removedNewIndex = storageNews.findIndex(item => item.id === id);\n  storageNews.splice(removedNewIndex, 1);\n  localStorage.setItem(STORAGE_KEY_FAVORITE, JSON.stringify(storageNews));\n  storageNews = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITE));\n  if (storageNews.length === 0) {\n    localStorage.removeItem(STORAGE_KEY_FAVORITE);\n    errorRequest.classList.remove('visually-hidden');\n  }\n\n  favoriteBtnText.classList.replace('js-is-favorite', 'js-tartet-favorite');\n  favoriteBtn.classList.replace('js-is-favorite', 'js-tartet-favorite');\n  favoriteSvg.classList.replace('js-is-favorite', 'js-tartet-favorite');\n  favoriteUse.classList.replace('js-is-favorite', 'js-tartet-favorite');\n\n  galleryItem.remove();\n}\n","import { createMarkupFavorite } from './createMarkupFavorite';\nconst STORAGE_KEY = 'favoriteNews';\nconst favoriteNews = JSON.parse(localStorage.getItem(STORAGE_KEY));\nconst errorRequest = document.querySelector('.errorRequest');\nconst serachForm = document.querySelector('.search-form');\n\nserachForm.addEventListener('submit', onSearch);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n  const query = evt.currentTarget.elements.searchQuery.value.trim();\n\n  if (!Boolean(query)) {\n    createMarkupFavorite(favoriteNews);\n    errorRequest.classList.add('visually-hidden');\n    return;\n  }\n  let markup = '';\n  let foundNews = [];\n  markup = favoriteNews.map(\n    ({ id, section, imgUrl, title, abstract, newDateStr, url }) => {\n      if (title.toLowerCase().includes(query.toLowerCase())) {\n        foundNews.push({\n          id: `${id}`,\n          url: `${url}`,\n          title: `${title}`,\n          section: `${section}`,\n          abstract: `${abstract}`,\n          newDateStr: `${newDateStr}`,\n          imgUrl: `${imgUrl}`,\n        });\n      }\n    }\n  );\n  createMarkupFavorite(foundNews);\n  if (foundNews.length === 0) {\n    errorRequest.classList.remove('visually-hidden');\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$9HPth","$a2c3c422f97b2ff5$var$READ_NEWS","$a2c3c422f97b2ff5$var$favoriteList","document","querySelector","$a2c3c422f97b2ff5$var$errorRequest","$d6d255c7f00ceb79$exports","getBundleURL","resolve","$a2c3c422f97b2ff5$export$86055b83ddaabb6a","URL","$a2c3c422f97b2ff5$var$favoriteNews","localStorage","getItem","$a2c3c422f97b2ff5$export$79646a09de8f934c","arr","Boolean","classList","remove","markup","map","id","section","imgUrl","title","abstract","newDateStr","url","length","slice","join","innerHTML","checkRead","addEventListener","e","$gEqtN","arrLastData","push","addRead","$a0db146b2f67bd21$var$STORAGE_KEY_FAVORITE","$a0db146b2f67bd21$var$favoriteList","$a0db146b2f67bd21$var$errorRequest","evt","target","contains","favoriteBtnText","favoriteBtn","favoriteSvg","favoriteUse","galleryItem","storageNews","removedNewIndex","findIndex","item","splice","setItem","stringify","removeItem","replace","$a0db146b2f67bd21$var$removeFromFavorite","closest","dataset","targetId","$0ea48b0aeb2236fb$var$favoriteNews","$0ea48b0aeb2236fb$var$errorRequest","preventDefault","query","currentTarget","elements","searchQuery","value","trim","add","foundNews","toLowerCase","includes"],"version":3,"file":"favorite.3fc94736.js.map"}