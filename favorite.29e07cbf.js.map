{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-65050e912c6e4f1c.js","src/favorite-page.js","src/js/createMarkupFavorite.js","node_modules/@parcel/runtime-js/lib/runtime-bf7b702fff5bd305.js","src/js/remove-from-favorite.js","src/js/search-favorite.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bTGq4\\\":\\\"favorite.29e07cbf.js\\\",\\\"kqMTO\\\":\\\"icon.a66ccba6.svg\\\",\\\"j7NJQ\\\":\\\"favorite.3ff38b78.js\\\"}\"));","import './js/mob-menu.js';\nimport './js/mob-input.js';\nimport './js/toggle-mode.js';\nimport './js/navigations.js';\nimport './js/createMarkupFavorite.js';\nimport './js/remove-from-favorite.js';\nimport './js/search-favorite.js';\n","import { checkRead, addRead } from './apiCard';\nimport { arrLastData } from './apiNews';\nconst READ_NEWS = 'readNews';\nconst favoriteList = document.querySelector('.gallery');\nconst errorRequest = document.querySelector('.errorRequest');\nexport const iconHeart = new URL('../images/icon.svg', import.meta.url);\nconst STORAGE_KEY_FAVORITE = 'favoriteNews';\nconst favoriteNews = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITE));\n\ncreateMarkupFavorite(favoriteNews);\n\nexport function createMarkupFavorite(arr) {\n  if (!Boolean(favoriteNews)) {\n    errorRequest.classList.remove('visually-hidden');\n    return;\n  }\n\n  let markup = '';\n\n  markup = arr\n    .map(({ id, section, imgUrl, title, abstract, newDateStr, url }) => {\n      return `<li class=\"card js-card-item\" data-target-id=${id}>\n        <div class=\"wrap-image\">\n          <img\n            src=\"${imgUrl}\"\n            alt=\"photo\"\n            class=\"wrap-image__photo\"\n          />\n          <p class=\"wrap-image__text\">${section}</p>\n          <button type=\"button\"  class=\"wrap-image__btn js-is-favorite\">\n            <span class=\"wrap-image__btn-text js-is-favorite\">Remove from favorite</span>\n              <svg class=\"js-is-favorite fill-heard\" width=\"16\" height=\"16\">\n                <use class=\"js-is-favorite\" href ='${iconHeart}#icon-heart'></use>\n              </svg>\n          </button>\n        \n        </div>\n            <h2 class=\"card__title\">${title}</h2>\n            <p class=\"card__description\">${\n              abstract.length > 112 ? abstract.slice(0, 113) + '...' : abstract\n            }</p>\n            <p class=\"wrap-info__time\">${newDateStr}</p>\n            <a href=\"${url}\" class=\"wrap-info__link\" target=\"_blank\" rel=\"noreferrer noopener\">Read more</a>\n            <p class=\"wrap-image__active visually-hidden\">Already read</p>\n      </li>`;\n    })\n    .join('');\n  favoriteList.innerHTML = markup;\n  checkRead(READ_NEWS);\n}\n\nfavoriteList.addEventListener('click', e => {\n  arrLastData.length = 0;\n  arrLastData.push(...favoriteNews);\n\n  addRead(e);\n});\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"kqMTO\")).toString();","const STORAGE_KEY_FAVORITE = 'favoriteNews';\nconst favoriteList = document.querySelector('.gallery');\nconst errorRequest = document.querySelector('.errorRequest');\n\nfavoriteList.addEventListener('click', getFavoriteId);\n\nfunction getFavoriteId(evt) {\n  if (evt.target.classList.contains('js-is-favorite')) {\n    const id = evt.target.closest('.js-card-item').dataset.targetId;\n    removeFromFavorite(id);\n  }\n}\n\nfunction removeFromFavorite(id) {\n  const favoriteBtnText = document.querySelector(\n    `li[data-target-id='${id}'] span.js-is-favorite`\n  );\n  const favoriteBtn = document.querySelector(\n    `li[data-target-id='${id}'] button.js-is-favorite`\n  );\n  const favoriteSvg = document.querySelector(\n    `li[data-target-id='${id}'] svg.js-is-favorite`\n  );\n  const favoriteUse = document.querySelector(\n    `li[data-target-id='${id}'] use.js-is-favorite`\n  );\n  const galleryItem = document.querySelector(`li[data-target-id='${id}']`);\n\n  let storageNews = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITE));\n  const removedNewIndex = storageNews.findIndex(item => item.id === id);\n  storageNews.splice(removedNewIndex, 1);\n  localStorage.setItem(STORAGE_KEY_FAVORITE, JSON.stringify(storageNews));\n  storageNews = JSON.parse(localStorage.getItem(STORAGE_KEY_FAVORITE));\n  if (storageNews.length === 0) {\n    localStorage.removeItem(STORAGE_KEY_FAVORITE);\n    errorRequest.classList.remove('visually-hidden');\n  }\n\n  favoriteBtnText.classList.replace('js-is-favorite', 'js-tartet-favorite');\n  favoriteBtn.classList.replace('js-is-favorite', 'js-tartet-favorite');\n  favoriteSvg.classList.replace('js-is-favorite', 'js-tartet-favorite');\n  favoriteUse.classList.replace('js-is-favorite', 'js-tartet-favorite');\n\n  galleryItem.remove();\n}\n","import { createMarkupFavorite } from './createMarkupFavorite';\nconst STORAGE_KEY = 'favoriteNews';\nconst favoriteNews = JSON.parse(localStorage.getItem(STORAGE_KEY));\nconst errorRequest = document.querySelector('.errorRequest');\nconst serachForm = document.querySelector('.search-form');\n\nserachForm.addEventListener('submit', onSearch);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n  const query = evt.currentTarget.elements.searchQuery.value.trim();\n\n  if (!Boolean(query)) {\n    createMarkupFavorite(favoriteNews);\n    errorRequest.classList.add('visually-hidden');\n    return;\n  }\n  let markup = '';\n  let foundNews = [];\n  markup = favoriteNews.map(\n    ({ id, section, imgUrl, title, abstract, newDateStr, url }) => {\n      if (title.toLowerCase().includes(query.toLowerCase())) {\n        foundNews.push({\n          id: `${id}`,\n          url: `${url}`,\n          title: `${title}`,\n          section: `${section}`,\n          abstract: `${abstract}`,\n          newDateStr: `${newDateStr}`,\n          imgUrl: `${imgUrl}`,\n        });\n      }\n    }\n  );\n  createMarkupFavorite(foundNews);\n  if (foundNews.length === 0) {\n    errorRequest.classList.remove('visually-hidden');\n  }\n}\n"],"names":["parcelRequire","register","JSON","parse","$idTct","$22b6103160464abb$var$READ_NEWS","$22b6103160464abb$var$favoriteList","document","querySelector","$22b6103160464abb$var$errorRequest","$6e1dd59b3cb8735d$exports","URL","resolve","import","meta","url","toString","$22b6103160464abb$export$86055b83ddaabb6a","$22b6103160464abb$var$favoriteNews","localStorage","getItem","$22b6103160464abb$export$79646a09de8f934c","arr","Boolean","classList","remove","markup","map","id","section","imgUrl","title","abstract","newDateStr","length","slice","join","innerHTML","checkRead","addEventListener","e","$2ltYP","arrLastData","push","addRead","$0bc300ae483b03c9$var$STORAGE_KEY_FAVORITE","$0bc300ae483b03c9$var$favoriteList","$0bc300ae483b03c9$var$errorRequest","evt","target","contains","favoriteBtnText","favoriteBtn","favoriteSvg","favoriteUse","galleryItem","storageNews","removedNewIndex","findIndex","item","splice","setItem","stringify","removeItem","replace","$0bc300ae483b03c9$var$removeFromFavorite","closest","dataset","targetId","$8338c2c243039ac0$var$favoriteNews","$8338c2c243039ac0$var$errorRequest","preventDefault","query","currentTarget","elements","searchQuery","value","trim","add","foundNews","toLowerCase","includes"],"version":3,"file":"favorite.29e07cbf.js.map"}